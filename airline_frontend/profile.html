<!-- ============================================ -->
<!-- FILE LOCATION: airline-frontend/profile.html -->
<!-- FIXED: Enforced Authentication -->
<!-- ============================================ -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Profile - Nimbus Airlines</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <h1>✈️ Nimbus Airlines</h1>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="search.html">Search Flights</a></li>
                <li><a href="profile.html" class="active">My Profile</a></li>
                <li><a href="my-bookings.html">My Bookings</a></li>
                <li><a href="#" id="logoutBtn">Logout</a></li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <div class="profile-container">
            <h2>My Profile</h2>
            
            <div class="profile-card">
                <!-- Profile Details -->
                <div class="profile-details">
                    <h3>Personal Information</h3>
                    <form id="profileForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label>First Name</label>
                                <input type="text" id="firstName" readonly>
                            </div>
                            <div class="form-group">
                                <label>Last Name</label>
                                <input type="text" id="lastName" readonly>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" id="email" readonly>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label>Phone</label>
                                <input type="tel" id="phone" readonly>
                            </div>
                            <div class="form-group">
                                <label>Age</label>
                                <input type="number" id="age" readonly>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>Gender</label>
                            <input type="text" id="gender" readonly>
                        </div>
                    </form>
                </div>
            </div>
            
            <div id="message"></div>
        </div>
    </div>
    <script src="js/config.js"></script>
    <script src="js/script.js"></script>
    <script>
        // ✅ FIX 1: ENFORCE AUTHENTICATION
        

        (function() {
            const passenger = localStorage.getItem('passenger');
            if (!passenger) {
                alert('⚠️ Please login to view your profile');
                window.location.href = 'login.html';
                return;
            }
        })();
        
        checkAuth();
        
        let passenger = null;
        
        // Load profile
        function loadProfile() {
            passenger = JSON.parse(localStorage.getItem('passenger'));
            
            document.getElementById('firstName').value = passenger.firstName;
            document.getElementById('lastName').value = passenger.lastName;
            document.getElementById('email').value = passenger.email;
            document.getElementById('phone').value = passenger.phone;
            document.getElementById('age').value = passenger.age || '';
            document.getElementById('gender').value = passenger.gender || '';
        }
        
        loadProfile();
    </script>
</body>
</html>